{"version":3,"sources":["../code/collection.service.ts"],"names":[],"mappings":"AAEA;;IAQE,iBAAiB,CAAC,CAAC,KAAA;IASnB,eAAe,CAAC,CAAC,KAAA;IAMjB,qBAAqB,CAAC,CAAC,KAAA;IAqBvB,mBAAmB,CAAC,CAAC,KAAA;IAwBrB,gBAAgB,CAAC,CAAC,KAAA;IAalB,kBAAkB,CAAC,CAAC,KAAA;IAcpB,mBAAmB,CAAC,CAAC,KAAA;IAUrB,WAAW,CAAC,CAAC,KAAA;IAKb,UAAU,CAAC,CAAC,KAAA,EAAE,IAAI,KAAA;IAoBlB,WAAW,CAAC,CAAC,KAAA;IA+Cb,eAAe,CAAC,CAAC,KAAA,EAAE,IAAI,KAAA;IAWvB,QAAQ,CAAC,CAAC,KAAA,EAAE,IAAI,KAAA;IAUhB,cAAc,CAAC,CAAC,KAAA,EAAE,IAAI,KAAA;IAUtB,MAAM,CAAC,CAAC,KAAA;CAWT","file":"collection.service.d.ts","sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CollectionService {\r\n\r\n  constructor() { }\r\n\r\n  // ---------- beg onlyDate ----------\r\n  onlyDateKeyDownFn(e) {\r\n    let flag = true;\r\n    if (this.keydownCode(e)) {\r\n      flag = this.ifLength58(e, flag);\r\n      flag = this.isNaNAndSpaceFn(e, flag);\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  onlyDateKeyUpFn(e) {\r\n    return this.ifLength487(e);\r\n  }\r\n  // ---------- end onlyDate ----------\r\n\r\n  // ---------- beg onlyDateTime ----------\r\n  onlyDateTimeKeyDownFn(e) {\r\n    let flag = true;\r\n    flag = this.onlyDateKeyDownFn(e);\r\n    if (e.target.value.length === 11) {\r\n      if (!(e.key * 1 <= 2)) {\r\n        flag = false;\r\n      }\r\n    }\r\n    if (e.target.value.length === 12) {\r\n      if (!(e.key * 1 <= 4)) {\r\n        flag = false;\r\n      }\r\n    }\r\n    if (e.target.value.length === 14 || e.target.value.length === 17) {\r\n      if (!(e.key * 1 <= 5)) {\r\n        flag = false;\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  onlyDateTimeKeyUpFn(e) {\r\n    let value = this.ifLength487(e);\r\n    if (value.length > 7 && value.length < 9) {\r\n      let tempValue = value.split('');\r\n      if (e.key == \"-\") {\r\n        tempValue[8] = '0';\r\n        tempValue[9] = '1';\r\n        e.target.value = tempValue.join('');\r\n      }\r\n    }\r\n    if (value.length === 10) {\r\n      e.target.value = value + ' ';\r\n    }\r\n    if (value.length === 13) {\r\n      e.target.value = value + ':';\r\n    }\r\n    if (value.length === 16) {\r\n      e.target.value = value + ':';\r\n    }\r\n\r\n    return e.target.value;\r\n  }\r\n  // ---------- end onlyDateTime ----------\r\n  // ---------- beg onlyIntFn ----------\r\n  onlyIntKeyDownFn(e) {\r\n    let flag = true;\r\n    if (e.key !== \"Backspace\") {\r\n      flag = this.ifLength(e, flag);\r\n      if (e.key !== \"+\" && e.key !== \"-\") {\r\n        flag = this.isNaNAndSpaceFn(e, flag);\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n  // ---------- end onlyIntFn ----------\r\n\r\n  // ---------- beg onlyFloat ----------\r\n  onlyFloatKeyDownFn(e) {\r\n    let flag = true;\r\n    if (this.keydownCode(e)) {\r\n      flag = this.ifIndexOfFlaot(e, flag);\r\n      flag = this.ifLength(e, flag);\r\n      if (e.key !== \".\" && e.key !== \"+\" && e.key !== \"-\") {\r\n        flag = this.isNaNAndSpaceFn(e, flag);\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n  // ---------- end onlyFloat ----------\r\n\r\n  // ---------- beg onlyNumber ----------\r\n  onlyNumberKeyDownFn(e) {\r\n    return this.onlyFloatKeyDownFn(e);\r\n  }\r\n  // ---------- end onlyNumber ----------\r\n\r\n\r\n\r\n  // ---------- beg 验证方法 ----------\r\n\r\n  // keydown 不等删除上下左右键\r\n  keydownCode(e) {\r\n    return e.key !== \"Backspace\" && e.key !== \"ArrowLeft\" && e.key !== \"ArrowRight\" && e.key !== \"ArrowUp\" && e.key !== \"ArrowDown\";\r\n  }\r\n\r\n  // date验证如果length = 5 || 8 \r\n  ifLength58(e, flag) {\r\n    if (e.target.value.length === 5) {\r\n      if (!(e.key * 1 <= 1)) {\r\n        flag = false;\r\n      }\r\n    }\r\n    if (e.target.value.length === 6) {\r\n      if (!(e.key * 1 <= 2)) {\r\n        flag = false;\r\n      }\r\n    }\r\n    if (e.target.value.length === 8) {\r\n      if (!(e.key * 1 <= 3)) {\r\n        flag = false;\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  // date验证 如果length = 4 8 7\r\n  ifLength487(e) {\r\n    let value = e.target.value;\r\n    if (value.length < 4) {\r\n      e.target.value = e.target.value.replace(/[^0-9]/g, '');\r\n    }\r\n    if (value.length === 4) {\r\n      e.target.value = value + '-';\r\n    }\r\n    if (value.length > 4 && value.length < 8) {\r\n      let tempValue = value.split('');\r\n      if (e.key == \"-\") {\r\n        tempValue[5] = '0';\r\n        tempValue[6] = '1';\r\n      }\r\n      value = tempValue.join('');\r\n    }\r\n    if (value.length === 7) {\r\n      e.target.value = value + '-';\r\n    }\r\n    if (value.length > 7) {\r\n      let tempValue = value.split('');\r\n      if (e.key == \"-\") {\r\n        tempValue[8] = '0';\r\n        tempValue[9] = '1';\r\n      }\r\n      if (tempValue[8] === '3') {\r\n        if (tempValue[9] * 1 > 1) {\r\n          tempValue[9] = '1';\r\n        }\r\n      }\r\n      let tempYear = value.split('-')[0],\r\n        tempMonth = value.split('-')[1];\r\n      if (tempMonth === '02') {\r\n        if (((tempYear % 4) == 0) && ((tempYear % 100) != 0) || ((tempYear % 400) == 0)) { } else {\r\n          if (tempValue[8] == \"2\") {\r\n            if (tempValue[9] * 1 > 8) {\r\n              tempValue[9] = \"8\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n      e.target.value = tempValue.join('');\r\n    }\r\n\r\n    return e.target.value;\r\n  }\r\n  // 非数字非空格键验证\r\n  isNaNAndSpaceFn(e, flag) {\r\n    if (isNaN(e.key * 1)) {\r\n      flag = false;\r\n    }\r\n    if (e.code === \"Space\") {\r\n      flag = false;\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  // 如果length > 0 不让输入 + - .等符号\r\n  ifLength(e, flag) {\r\n    if (e.target.value.length > 0) {\r\n      if (e.key === \"+\" || e.key === \"-\") {\r\n        flag = false;\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  // 如果有小数.了不让它再输入.\r\n  ifIndexOfFlaot(e, flag) {\r\n    if (e.target.value.indexOf('.') !== -1) {\r\n      if (e.key === \".\") {\r\n        flag = false;\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  // 浮点金额补 .00\r\n  blurFn(e) {\r\n    if (e.target.value !== '' && e.target.value.indexOf('.') === -1) {\r\n      e.target.value = e.target.value + \".00\";\r\n    }\r\n    let tempValue = e.target.value.split('');\r\n    if (tempValue[tempValue.length - 1] === '.') {\r\n      e.target.value = e.target.value + '00';\r\n    }\r\n    return e.target.value;\r\n  }\r\n  // ---------- end 验证方法 ----------\r\n}\r\n\r\n"]}